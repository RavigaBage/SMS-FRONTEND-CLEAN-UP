<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invoice Generation - EduManage Pro</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: #f5f7fa;
            padding: 24px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            margin-bottom: 32px;
        }

        .header h1 {
            font-size: 28px;
            color: #1a1a1a;
            margin-bottom: 8px;
        }

        .breadcrumb {
            color: #999;
            font-size: 14px;
        }

        .breadcrumb a {
            color: #00bcd4;
            text-decoration: none;
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 480px;
            gap: 24px;
        }

        .card {
            background: white;
            border-radius: 12px;
            padding: 32px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 1px solid #f0f0f0;
        }

        .card-title {
            font-size: 20px;
            font-weight: 600;
            color: #1a1a1a;
        }

        .form-section {
            margin-bottom: 32px;
        }

        .section-title {
            font-size: 14px;
            font-weight: 600;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 16px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }

        label {
            font-size: 14px;
            font-weight: 500;
            color: #333;
            margin-bottom: 8px;
        }

        label span {
            color: #f44336;
        }

        input, select, textarea {
            padding: 12px 16px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            font-family: inherit;
            transition: all 0.2s;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #00bcd4;
            box-shadow: 0 0 0 3px rgba(0, 188, 212, 0.1);
        }

        textarea {
            resize: vertical;
            min-height: 80px;
        }

        .fee-items-section {
            margin-bottom: 24px;
        }

        .fee-item {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr 40px;
            gap: 12px;
            align-items: end;
            margin-bottom: 12px;
            padding: 16px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .fee-item-header {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr 40px;
            gap: 12px;
            padding: 0 16px 12px;
            font-size: 12px;
            font-weight: 600;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .remove-btn {
            width: 40px;
            height: 40px;
            border: none;
            background: #ffebee;
            color: #f44336;
            border-radius: 8px;
            cursor: pointer;
            font-size: 18px;
            transition: all 0.2s;
        }

        .remove-btn:hover {
            background: #f44336;
            color: white;
        }

        .add-item-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            border: 2px dashed #00bcd4;
            background: transparent;
            color: #00bcd4;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s;
        }

        .add-item-btn:hover {
            background: #e0f7fa;
        }

        .discount-section {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr;
            gap: 16px;
            padding: 16px;
            background: #fff3e0;
            border-radius: 8px;
            margin-top: 16px;
        }

        .total-section {
            margin-top: 24px;
            padding: 20px;
            background: #e0f7fa;
            border-radius: 8px;
        }

        .total-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
            font-size: 14px;
            color: #666;
        }

        .total-row.grand-total {
            font-size: 20px;
            font-weight: 700;
            color: #1a1a1a;
            padding-top: 12px;
            border-top: 2px solid #00bcd4;
            margin-bottom: 0;
        }

        .form-actions {
            display: flex;
            gap: 12px;
            margin-top: 24px;
        }

        .btn {
            flex: 1;
            padding: 14px 24px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-primary {
            background: #00bcd4;
            color: white;
        }

        .btn-primary:hover {
            background: #00acc1;
            box-shadow: 0 4px 12px rgba(0, 188, 212, 0.3);
        }

        .btn-secondary {
            background: white;
            color: #666;
            border: 1px solid #e0e0e0;
        }

        .btn-secondary:hover {
            background: #f5f7fa;
        }

        /* Invoice Preview Styles */
        .invoice-preview {
            position: sticky;
            top: 24px;
        }

        .preview-actions {
            display: flex;
            gap: 8px;
        }

        .icon-btn {
            width: 36px;
            height: 36px;
            border: 1px solid #e0e0e0;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            transition: all 0.2s;
        }

        .icon-btn:hover {
            background: #f5f7fa;
            color: #00bcd4;
        }

        .invoice-document {
            background: white;
            padding: 48px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            margin-top: 16px;
        }

        .invoice-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 40px;
            padding-bottom: 24px;
            border-bottom: 2px solid #00bcd4;
        }

        .school-info {
            flex: 1;
        }

        .school-logo {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #00bcd4, #00acc1);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 12px;
        }

        .school-name {
            font-size: 20px;
            font-weight: 700;
            color: #1a1a1a;
            margin-bottom: 4px;
        }

        .school-address {
            font-size: 12px;
            color: #666;
            line-height: 1.6;
        }

        .invoice-meta {
            text-align: right;
        }

        .invoice-title {
            font-size: 32px;
            font-weight: 700;
            color: #1a1a1a;
            margin-bottom: 8px;
        }

        .invoice-number {
            font-size: 14px;
            color: #666;
            margin-bottom: 4px;
        }

        .invoice-date {
            font-size: 14px;
            color: #666;
        }

        .invoice-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 32px;
            margin-bottom: 40px;
        }

        .detail-section h3 {
            font-size: 12px;
            font-weight: 600;
            color: #999;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 12px;
        }

        .detail-section p {
            font-size: 14px;
            color: #333;
            line-height: 1.6;
            margin-bottom: 4px;
        }

        .detail-section strong {
            color: #1a1a1a;
        }

        .invoice-table {
            width: 100%;
            margin-bottom: 32px;
            border-collapse: collapse;
        }

        .invoice-table thead {
            background: #f8f9fa;
        }

        .invoice-table th {
            text-align: left;
            padding: 12px;
            font-size: 12px;
            font-weight: 600;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .invoice-table th:last-child,
        .invoice-table td:last-child {
            text-align: right;
        }

        .invoice-table td {
            padding: 16px 12px;
            border-bottom: 1px solid #f0f0f0;
            font-size: 14px;
            color: #333;
        }

        .invoice-summary {
            display: flex;
            justify-content: flex-end;
            margin-bottom: 32px;
        }

        .summary-table {
            width: 300px;
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            font-size: 14px;
            color: #666;
        }

        .summary-row.total {
            font-size: 18px;
            font-weight: 700;
            color: #1a1a1a;
            padding-top: 16px;
            border-top: 2px solid #e0e0e0;
        }

        .invoice-footer {
            padding-top: 24px;
            border-top: 1px solid #e0e0e0;
            text-align: center;
        }

        .payment-info {
            margin-bottom: 16px;
        }

        .payment-info h4 {
            font-size: 12px;
            font-weight: 600;
            color: #999;
            text-transform: uppercase;
            margin-bottom: 8px;
        }

        .payment-info p {
            font-size: 14px;
            color: #666;
            line-height: 1.6;
        }

        .footer-note {
            font-size: 12px;
            color: #999;
            font-style: italic;
        }

        @media print {
            body {
                background: white;
                padding: 0;
            }
            .main-grid {
                display: block;
            }
            .card:first-child {
                display: none;
            }
            .invoice-preview {
                position: static;
            }
            .card-header {
                display: none;
            }
            .invoice-document {
                box-shadow: none;
                border: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Generate Invoice</h1>
            <div class="breadcrumb">
                <a href="#">Finance</a> / <a href="#">Invoices</a> / <span>New Invoice</span>
            </div>
        </div>

        <div class="main-grid">
            <!-- Invoice Form -->
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Invoice Details</h2>
                </div>

                <form id="invoiceForm">
                    <!-- Student Information -->
                    <div class="form-section">
                        <h3 class="section-title">Student Information</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Student ID <span>*</span></label>
                                <input type="text" id="studentId" placeholder="Enter student ID" value="STU-2024-001" required>
                            </div>
                            <div class="form-group">
                                <label>Student Name <span>*</span></label>
                                <input type="text" id="studentName" placeholder="Enter student name" value="Emily Johnson" required>
                            </div>
                            <div class="form-group">
                                <label>Grade/Class <span>*</span></label>
                                <select id="studentGrade" required>
                                    <option value="">Select grade</option>
                                    <option value="Grade 10" selected>Grade 10</option>
                                    <option value="Grade 11">Grade 11</option>
                                    <option value="Grade 12">Grade 12</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Parent/Guardian <span>*</span></label>
                                <input type="text" id="parentName" placeholder="Enter parent name" value="Michael Johnson" required>
                            </div>
                            <div class="form-group full-width">
                                <label>Billing Address</label>
                                <textarea id="billingAddress" placeholder="Enter billing address">123 Oak Street, Springfield, IL 62701</textarea>
                            </div>
                        </div>
                    </div>

                    <!-- Invoice Information -->
                    <div class="form-section">
                        <h3 class="section-title">Invoice Information</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Invoice Number <span>*</span></label>
                                <input type="text" id="invoiceNumber" value="INV-2024-0156" readonly>
                            </div>
                            <div class="form-group">
                                <label>Invoice Date <span>*</span></label>
                                <input type="date" id="invoiceDate" value="2024-01-21" required>
                            </div>
                            <div class="form-group">
                                <label>Due Date <span>*</span></label>
                                <input type="date" id="dueDate" value="2024-02-21" required>
                            </div>
                            <div class="form-group">
                                <label>Academic Term</label>
                                <select id="academicTerm">
                                    <option value="Spring 2024" selected>Spring 2024</option>
                                    <option value="Fall 2024">Fall 2024</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Fee Items -->
                    <div class="form-section">
                        <h3 class="section-title">Fee Items</h3>
                        <div id="feeItemsContainer">
                            <div class="fee-item-header">
                                <div>Description</div>
                                <div>Quantity</div>
                                <div>Unit Price</div>
                                <div>Amount</div>
                                <div></div>
                            </div>
                            <div class="fee-item">
                                <input type="text" placeholder="Fee description" value="Tuition Fee - Spring 2024">
                                <input type="number" placeholder="Qty" value="1" min="1">
                                <input type="number" placeholder="$0.00" value="2500.00" step="0.01">
                                <input type="number" placeholder="$0.00" value="2500.00" readonly>
                                <button type="button" class="remove-btn" onclick="removeItem(this)">√ó</button>
                            </div>
                            <div class="fee-item">
                                <input type="text" placeholder="Fee description" value="Laboratory Fee">
                                <input type="number" placeholder="Qty" value="1" min="1">
                                <input type="number" placeholder="$0.00" value="350.00" step="0.01">
                                <input type="number" placeholder="$0.00" value="350.00" readonly>
                                <button type="button" class="remove-btn" onclick="removeItem(this)">√ó</button>
                            </div>
                            <div class="fee-item">
                                <input type="text" placeholder="Fee description" value="Library Fee">
                                <input type="number" placeholder="Qty" value="1" min="1">
                                <input type="number" placeholder="$0.00" value="150.00" step="0.01">
                                <input type="number" placeholder="$0.00" value="150.00" readonly>
                                <button type="button" class="remove-btn" onclick="removeItem(this)">√ó</button>
                            </div>
                        </div>
                        <button type="button" class="add-item-btn" onclick="addFeeItem()">
                            + Add Item
                        </button>

                        <!-- Discount Section -->
                        <div class="discount-section">
                            <div class="form-group">
                                <label>Discount Reason</label>
                                <input type="text" placeholder="e.g., Sibling discount" value="Early Payment Discount">
                            </div>
                            <div class="form-group">
                                <label>Discount Type</label>
                                <select id="discountType">
                                    <option value="percentage" selected>Percentage</option>
                                    <option value="fixed">Fixed Amount</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Discount Value</label>
                                <input type="number" id="discountValue" placeholder="0" value="10" step="0.01">
                            </div>
                        </div>
                    </div>

                    <!-- Total Section -->
                    <div class="total-section">
                        <div class="total-row">
                            <span>Subtotal:</span>
                            <span id="subtotal">$3,000.00</span>
                        </div>
                        <div class="total-row">
                            <span>Discount (10%):</span>
                            <span id="discount">-$300.00</span>
                        </div>
                        <div class="total-row">
                            <span>Tax (0%):</span>
                            <span id="tax">$0.00</span>
                        </div>
                        <div class="total-row grand-total">
                            <span>Total Amount:</span>
                            <span id="grandTotal">$2,700.00</span>
                        </div>
                    </div>

                    <!-- Additional Notes -->
                    <div class="form-section">
                        <div class="form-group full-width">
                            <label>Notes / Terms & Conditions</label>
                            <textarea placeholder="Add any additional notes or payment terms">Payment is due within 30 days. Late payments will incur a 5% penalty fee.</textarea>
                        </div>
                    </div>

                    <!-- Form Actions -->
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary">Save as Draft</button>
                        <button type="button" class="btn btn-primary" onclick="generateInvoice()">Generate Invoice</button>
                    </div>
                </form>
            </div>

            <!-- Invoice Preview -->
            <div class="card invoice-preview">
                <div class="card-header">
                    <h2 class="card-title">Invoice Preview</h2>
                    <div class="preview-actions">
                        <button class="icon-btn" title="Print" onclick="window.print()">üñ®Ô∏è</button>
                        <button class="icon-btn" title="Download PDF">üì•</button>
                        <button class="icon-btn" title="Send Email">üìß</button>
                    </div>
                </div>

                <div class="invoice-document">
                    <!-- Invoice Header -->
                    <div class="invoice-header">
                        <div class="school-info">
                            <div class="school-logo">EP</div>
                            <div class="school-name">EduManage Pro Academy</div>
                            <div class="school-address">
                                456 Education Lane<br>
                                Springfield, IL 62704<br>
                                Phone: (555) 123-4567<br>
                                Email: billing@edumanage.edu
                            </div>
                        </div>
                        <div class="invoice-meta">
                            <div class="invoice-title">INVOICE</div>
                            <div class="invoice-number">Invoice #: INV-2024-0156</div>
                            <div class="invoice-date">Date: January 21, 2024</div>
                            <div class="invoice-date">Due Date: February 21, 2024</div>
                        </div>
                    </div>

                    <!-- Billing Details -->
                    <div class="invoice-details">
                        <div class="detail-section">
                            <h3>Bill To</h3>
                            <p><strong>Michael Johnson</strong></p>
                            <p>Parent of Emily Johnson</p>
                            <p>Student ID: STU-2024-001</p>
                            <p>Grade: Grade 10</p>
                            <p>123 Oak Street</p>
                            <p>Springfield, IL 62701</p>
                        </div>
                        <div class="detail-section">
                            <h3>Invoice Details</h3>
                            <p><strong>Academic Term:</strong> Spring 2024</p>
                            <p><strong>Payment Method:</strong> Bank Transfer / Check</p>
                            <p><strong>Status:</strong> <span style="color: #ff9800; font-weight: 600;">Pending</span></p>
                        </div>
                    </div>

                    <!-- Fee Items Table -->
                    <table class="invoice-table">
                        <thead>
                            <tr>
                                <th>Description</th>
                                <th>Quantity</th>
                                <th>Unit Price</th>
                                <th>Amount</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Tuition Fee - Spring 2024</td>
                                <td>1</td>
                                <td>$2,500.00</td>
                                <td>$2,500.00</td>
                            </tr>
                            <tr>
                                <td>Laboratory Fee</td>
                                <td>1</td>
                                <td>$350.00</td>
                                <td>$350.00</td>
                            </tr>
                            <tr>
                                <td>Library Fee</td>
                                <td>1</td>
                                <td>$150.00</td>
                                <td>$150.00</td>
                            </tr>
                        </tbody>
                    </table>

                    <!-- Invoice Summary -->
                    <div class="invoice-summary">
                        <div class="summary-table">
                            <div class="summary-row">
                                <span>Subtotal:</span>
                                <span>$3,000.00</span>
                            </div>
                            <div class="summary-row">
                                <span>Discount (Early Payment - 10%):</span>
                                <span>-$300.00</span>
                            </div>
                            <div class="summary-row">
                                <span>Tax (0%):</span>
                                <span>$0.00</span>
                            </div>
                            <div class="summary-row total">
                                <span>Total Amount:</span>
                                <span>$2,700.00</span>
                            </div>
                        </div>
                    </div>

                    <!-- Invoice Footer -->
                    <div class="invoice-footer">
                        <div class="payment-info">
                            <h4>Payment Information</h4>
                            <p>
                                Bank: Springfield National Bank<br>
                                Account Name: EduManage Pro Academy<br>
                                Account Number: 1234-5678-9012<br>
                                Routing Number: 987654321
                            </p>
                        </div>
                        <p class="footer-note">
                            Payment is due within 30 days. Late payments will incur a 5% penalty fee.<br>
                            Thank you for your prompt payment.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function addFeeItem() {
            const container = document.getElementById('feeItemsContainer');
            const newItem = document.createElement('div');
            newItem.className = 'fee-item';
            newItem.innerHTML = `
                <input type="text" placeholder="Fee description">
                <input type="number" placeholder="Qty" value="1" min="1" onchange="calculateAmount(this)">
                <input type="number" placeholder="$0.00" value="0.00" step="0.01" onchange="calculateAmount(this)">
                <input type="number" placeholder="$0.00" value="0.00" readonly>
                <button type="button" class="remove-btn" onclick="removeItem(this)">√ó</button>
            `;
            container.appendChild(newItem);
        }

        function removeItem(button) {
            if (document.querySelectorAll('.fee-item').length > 1) {
                button.closest('.fee-item').remove();
                calculateTotals();
            }
        }

        function calculateAmount(input) {
            const feeItem = input.closest('.fee-item');
            const qty = parseFloat(feeItem.querySelectorAll('input')[1].value) || 0;
            const price = parseFloat(feeItem.querySelectorAll('input')[2].value) || 0;
            const amount = qty * price;
            feeItem.querySelectorAll('input')[3].value = amount.toFixed(2);
            calculateTotals();
        }

        function calculateTotals() {
            let subtotal = 0;
            document.querySelectorAll('.fee-item').forEach(item => {
                const amount = parseFloat(item.querySelectorAll('input')[3].value) || 0;
                subtotal += amount;
            });

            const discountValue = parseFloat(document.getElementById('discountValue').value) || 0;
            const discountType = document.getElementById('discountType').value;
            
            let discount = 0;
            if (discountType === 'percentage') {
                discount = (subtotal * discountValue) / 100;
            } else {
                discount = discountValue;
            }

            const tax = 0;
            const total = subtotal - discount + tax;

            document.getElementById('subtotal').textContent = '$' + subtotal.toFixed(2);
            document.getElementById('discount').textContent = '-$' + discount.toFixed(2);
            document.getElementById('tax').textContent = '$' + tax.toFixed(2);
            document.getElementById('grandTotal').textContent = '$' + total.toFixed(2);
        }

        function generateInvoice() {
            alert('Invoice generated successfully! You can now print or download the invoice.');
        }

        // Auto-calculate amounts on input change
        document.addEventListener('input', function(e) {
            if (e.target.type === 'number' && e.target.closest('.fee-item')) {
                calculateAmount(e.target);
            }
            if (e.target.id === 'discountValue' || e.target.id === 'discountType') {
                calculateTotals();
            }
        });

        // Initialize calculations
        calculateTotals();
    </script>
</body>
</html>